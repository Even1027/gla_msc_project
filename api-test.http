### ğŸ§ª å®Œæ•´å¹‚ç­‰æ€§æµ‹è¯•æµç¨‹
### ä½¿ç”¨ä¿®æ­£åçš„è¯·æ±‚æ ¼å¼

### æ­¥éª¤0ï¼šæ¸…ç†æµ‹è¯•ç¯å¢ƒ
DELETE http://localhost:8080/api/orders/debug/clear-idempotency

### æ­¥éª¤1ï¼šæ£€æŸ¥Redisè¿æ¥çŠ¶æ€
GET http://localhost:8080/api/orders/debug/redis-status

### æ­¥éª¤2ï¼šåº“å­˜æœåŠ¡å¥åº·æ£€æŸ¥
GET http://localhost:8081/api/inventory/health

### æ­¥éª¤3ï¼šè®°å½•åˆå§‹åº“å­˜çŠ¶æ€ï¼ˆäº§å“1åº”è¯¥æ˜¯100ï¼‰
GET http://localhost:8081/api/inventory

### æ­¥éª¤4ï¼šæŸ¥çœ‹å½“å‰å¹‚ç­‰æ€§é”®ï¼ˆåº”è¯¥ä¸ºç©ºï¼‰
GET http://localhost:8080/api/orders/debug/idempotency-keys

### æ­¥éª¤5ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªè®¢å•ï¼ˆæ¶ˆè€—productId=1çš„å•†å“ï¼Œæ•°é‡=3ï¼‰
POST http://localhost:8080/api/orders
Content-Type: application/json
Idempotency-Key: idempotency-test-006

{
  "productId": 1,
  "quantity": 3
}

### æ­¥éª¤6ï¼šæ£€æŸ¥Redisä¸­çš„å¹‚ç­‰æ€§é”®
GET http://localhost:8080/api/orders/debug/idempotency?key=idempotency-test-006

### æ­¥éª¤7ï¼šç­‰å¾…5ç§’åæ£€æŸ¥åº“å­˜æ›´æ–°ï¼ˆäº§å“1åº”è¯¥ä»100å‡å°‘åˆ°97ï¼‰
### æ³¨æ„ï¼šè¯·æ‰‹åŠ¨ç­‰å¾…5ç§’å†æ‰§è¡Œä¸‹ä¸€æ­¥
GET http://localhost:8081/api/inventory

### æ­¥éª¤8ï¼šéªŒè¯Rediså¹‚ç­‰æ€§ï¼ˆä½¿ç”¨ç›¸åŒKeyï¼Œä¸åŒæ•°æ®ï¼Œåº”è¿”å›ç›¸åŒè®¢å•ï¼‰
POST http://localhost:8080/api/orders
Content-Type: application/json
Idempotency-Key: idempotency-test-006

{
  "productId": 1,
  "quantity": 2
}

### æ­¥éª¤9ï¼šå†æ¬¡æ£€æŸ¥åº“å­˜ï¼ˆäº§å“1åº”è¯¥ä»ç„¶æ˜¯97ï¼Œæ²¡æœ‰å†æ¬¡å‡å°‘ï¼‰
GET http://localhost:8081/api/inventory

### æ­¥éª¤10ï¼šæŸ¥çœ‹æ‰€æœ‰å¹‚ç­‰æ€§é”®
GET http://localhost:8080/api/orders/debug/idempotency-keys

### æ­¥éª¤11ï¼šåˆ›å»ºæ–°è®¢å•æµ‹è¯•äº§å“2ï¼ˆä¸åŒçš„Idempotency-Keyï¼‰
POST http://localhost:8080/api/orders
Content-Type: application/json
Idempotency-Key: product2-success-test-001

{
  "productId": 2,
  "quantity": 3
}

### æ­¥éª¤12ï¼šæ£€æŸ¥æ‰€æœ‰äº§å“åº“å­˜æœ€ç»ˆçŠ¶æ€
GET http://localhost:8081/api/inventory

### æ­¥éª¤13ï¼šæŸ¥çœ‹æ‰€æœ‰è®¢å•
GET http://localhost:8080/api/orders

### æ­¥éª¤14ï¼šæŸ¥çœ‹æœ€ç»ˆçš„å¹‚ç­‰æ€§é”®çŠ¶æ€
GET http://localhost:8080/api/orders/debug/idempotency-keys

### æ­¥éª¤15ï¼šè®¢å•æœåŠ¡å¥åº·æ£€æŸ¥
GET http://localhost:8080/api/orders/health

### ğŸ” é¢å¤–è°ƒè¯•æµ‹è¯•

### æ‰‹åŠ¨è®¾ç½®å¹‚ç­‰æ€§é”®æµ‹è¯•
POST http://localhost:8080/api/orders/debug/set-idempotency?key=manual-test&value=ORDER_TEST_123

### éªŒè¯æ‰‹åŠ¨è®¾ç½®çš„é”®
GET http://localhost:8080/api/orders/debug/idempotency?key=manual-test

### æµ‹è¯•ç®€åŒ–æ¥å£ï¼ˆæ— å¹‚ç­‰æ€§æ§åˆ¶ï¼‰
GET http://localhost:8080/api/orders/simple?productId=3&quantity=1

### å¹¶å‘æµ‹è¯•ï¼šå¿«é€Ÿè¿ç»­å‘é€ç›¸åŒè¯·æ±‚
POST http://localhost:8080/api/orders
Content-Type: application/json
Idempotency-Key: concurrent-test-001

{
  "productId": 1,
  "quantity": 1
}

###
POST http://localhost:8080/api/orders
Content-Type: application/json
Idempotency-Key: concurrent-test-001

{
  "productId": 1,
  "quantity": 1
}

### æ¸…ç†æµ‹è¯•æ•°æ®
DELETE http://localhost:8080/api/orders/debug/clear-idempotency